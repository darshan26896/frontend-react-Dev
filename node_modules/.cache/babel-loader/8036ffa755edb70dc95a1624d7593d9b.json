{"ast":null,"code":"import _slicedToArray from \"/home/shivanee/Downloads/ETM-project/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"/home/shivanee/Downloads/ETM-project/react/src/app/modules/roles/ModuleList.js\";\nimport React, { useState } from \"react\";\nimport { Card, CardBody, CardHeader } from \"../../../_metronic/_partials/controls\";\nimport FormControl from '@material-ui/core/FormControl';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport { element } from \"prop-types\";\nvar ModuleList = function ModuleList(_ref) {\n  var modules = _ref.modules,\n    rights = _ref.rights,\n    onChange = _ref.onChange,\n    allrights = _ref.allrights,\n    onSelectAll = _ref.onSelectAll,\n    all = _ref.all,\n    allLength = _ref.allLength;\n  var _useState = useState(0),\n    _useState2 = _slicedToArray(_useState, 2),\n    recentlyChecked = _useState2[0],\n    setRecentlyChecked = _useState2[1];\n  var onChildChange = function onChildChange(e, allrights, right_slug, module_slug) {\n    setRecentlyChecked(module_slug);\n    onChange(e, allrights, right_slug, module_slug);\n  };\n  var modulesarr = [];\n  modules && modules.map(function (m) {\n    modulesarr.push(m);\n  });\n  var rightsarr = [];\n  rights && rights.map(function (r) {\n    rightsarr.push(r);\n  });\n  // const results = rightsarr.filter(({ moduleID: id1 }) => modulesarr.some(({ _id: id2 }) => id1 === id2));\n  // let customers = [];\n  // customers = results.reduce((dict, data) => {\n  //     console\n  //     if (!dict[data.module_id]) dict[data.module_id] = [];\n  //     dict[data.module_id].push(data);\n  //     return dict;\n  // }, []);\n  // console.log('37', customers)\n\n  var isCheckBoxChecked = function isCheckBoxChecked(moduleKey, rightsKey) {\n    var isChecked = false;\n    if (allrights && allrights.hasOwnProperty(moduleKey) && allrights[moduleKey].indexOf(rightsKey) !== -1) {\n      isChecked = true;\n    }\n    return isChecked;\n  };\n  var isCheckedAllChecked = function isCheckedAllChecked(moduleId, slug) {\n    var uncheckCount = 1;\n    if (rights) {\n      var getAllRights = rights.filter(function (item) {\n        return item.module_id == moduleId;\n      });\n      if (allrights && allrights[slug] && getAllRights && getAllRights.length > 0) {\n        uncheckCount = 0;\n        getAllRights.forEach(function (item) {\n          if (allrights[slug] && allrights[slug].indexOf(item.slug) == -1) {\n            uncheckCount++;\n          }\n        });\n      }\n    }\n    return uncheckCount > 0 ? false : true;\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, (modules || []).map(function (module) {\n    var module_slugs = module.name.toLowerCase().replace(/ /g, '-').replace(/[^\\w-]+/g, '');\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: \"\".concat('modules_' + module.value),\n      className: \"card-group col-md-6 mb-2\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      className: \"card border-secondary card-line\",\n      style: {\n        border: \"1px solid black\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(CardHeader, {\n      title: module.name,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(CardBody, {\n      className: \"row\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(FormControl, {\n      component: \"fieldset\",\n      className: \"col-md-6\",\n      style: {\n        paddingLeft: \"2rem\"\n      },\n      key: module.value + \"fc\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      name: module.slug,\n      key: module.value,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(FormControlLabel, {\n      control: /*#__PURE__*/React.createElement(Checkbox, {\n        name: \"all\",\n        key: \"all\",\n        checked: isCheckedAllChecked(module.value, module.slug),\n        onChange: function onChange(e) {\n          return onSelectAll(e, module.value, module.slug);\n        }\n        // onchange={onSelectAll}\n        ,\n        value: \"all\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 50\n        }\n      }),\n      label: \"All\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 37\n      }\n    }), (rights || []).map(function (r) {\n      var module_slug = r.name.toLowerCase().replace(/ /g, '-').replace(/[^\\w-]+/g, '');\n      if (module.value === r.module_id) {\n        return /*#__PURE__*/React.createElement(FormControlLabel, {\n          key: \"\".concat('rights_' + r.value),\n          control: /*#__PURE__*/React.createElement(Checkbox, {\n            name: \"rights\",\n            key: r.slug,\n            id: r.slug,\n            checked: isCheckBoxChecked(module.slug, r.slug),\n            onChange: function onChange(e) {\n              return onChildChange(e, allrights, r.slug, module_slugs);\n            },\n            multiple: true,\n            value: r.slug,\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 53\n            }\n          }),\n          label: r.name,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 52\n          }\n        });\n      }\n    }))))));\n  }));\n};\nexport default ModuleList;","map":{"version":3,"names":["React","useState","Card","CardBody","CardHeader","FormControl","FormGroup","FormControlLabel","Checkbox","element","ModuleList","_ref","modules","rights","onChange","allrights","onSelectAll","all","allLength","_useState","_useState2","_slicedToArray","recentlyChecked","setRecentlyChecked","onChildChange","e","right_slug","module_slug","modulesarr","map","m","push","rightsarr","r","isCheckBoxChecked","moduleKey","rightsKey","isChecked","hasOwnProperty","indexOf","isCheckedAllChecked","moduleId","slug","uncheckCount","getAllRights","filter","item","module_id","length","forEach","createElement","Fragment","module","module_slugs","name","toLowerCase","replace","key","concat","value","className","__self","_this","__source","fileName","_jsxFileName","lineNumber","columnNumber","style","border","title","component","paddingLeft","control","checked","label","id","multiple"],"sources":["/home/shivanee/Downloads/ETM-project/react/src/app/modules/roles/ModuleList.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport {\r\n    Card,\r\n    CardBody,\r\n    CardHeader\r\n} from \"../../../_metronic/_partials/controls\";\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport { element } from \"prop-types\";\r\n\r\nconst ModuleList = ({ modules, rights, onChange, allrights, onSelectAll, all, allLength }) => {\r\n    const [recentlyChecked, setRecentlyChecked] = useState(0);\r\n\r\n    const onChildChange = (e, allrights, right_slug, module_slug) => {\r\n        setRecentlyChecked(module_slug);\r\n        onChange(e, allrights, right_slug, module_slug);\r\n    }\r\n\r\n    var modulesarr = [];\r\n    modules && modules.map((m) => {\r\n        modulesarr.push(m)\r\n    })\r\n    var rightsarr = [];\r\n    rights && rights.map((r) => {\r\n        rightsarr.push(r)\r\n    })\r\n    // const results = rightsarr.filter(({ moduleID: id1 }) => modulesarr.some(({ _id: id2 }) => id1 === id2));\r\n    // let customers = [];\r\n    // customers = results.reduce((dict, data) => {\r\n    //     console\r\n    //     if (!dict[data.module_id]) dict[data.module_id] = [];\r\n    //     dict[data.module_id].push(data);\r\n    //     return dict;\r\n    // }, []);\r\n    // console.log('37', customers)\r\n\r\n\r\n    const isCheckBoxChecked = (moduleKey, rightsKey) => {\r\n        let isChecked = false;\r\n        if (allrights && allrights.hasOwnProperty(moduleKey) &&\r\n            allrights[moduleKey].indexOf(rightsKey) !== -1) {\r\n            isChecked = true;\r\n        }\r\n\r\n        return isChecked;\r\n    }\r\n\r\n    const isCheckedAllChecked = (moduleId, slug) => {\r\n        let uncheckCount = 1;\r\n        if (rights) {\r\n            const getAllRights = rights.filter(item => item.module_id == moduleId);\r\n            if (allrights && allrights[slug] && getAllRights && getAllRights.length > 0) {\r\n                uncheckCount = 0;\r\n                getAllRights.forEach(item => {\r\n                    if (allrights[slug] && allrights[slug].indexOf(item.slug) == -1) {\r\n                        uncheckCount++;\r\n                    }\r\n                })\r\n            }\r\n        }\r\n\r\n        return (uncheckCount > 0) ? false : true;\r\n    }\r\n\r\n    return (<>\r\n        {(modules || []).map((module) => {\r\n            const module_slugs = module.name.toLowerCase().replace(/ /g, '-').replace(/[^\\w-]+/g, '');\r\n            return (\r\n                <div key={`${'modules_' + module.value}`} className=\"card-group col-md-6 mb-2\" >\r\n                    <Card className=\"card border-secondary card-line\" style={{ border: \"1px solid black\" }} >\r\n                        <CardHeader title={module.name} />\r\n                        <CardBody className='row' >\r\n                            <FormControl component=\"fieldset\" className=\"col-md-6\" style={{ paddingLeft: \"2rem\" }} key={module.value + \"fc\"}>\r\n                                <FormGroup name={module.slug} key={module.value} >\r\n                                    <FormControlLabel\r\n                                        control={<Checkbox\r\n                                            name=\"all\"\r\n                                            key=\"all\"\r\n                                            checked={isCheckedAllChecked(module.value, module.slug)}\r\n                                            onChange={(e) => onSelectAll(e, module.value, module.slug)}\r\n                                            // onchange={onSelectAll}\r\n                                            value=\"all\"\r\n                                        />}\r\n                                        label=\"All\"\r\n                                    />\r\n                                    {(rights || []).map((r) => {\r\n                                        const module_slug = r.name.toLowerCase().replace(/ /g, '-').replace(/[^\\w-]+/g, '');\r\n                                        if (module.value === r.module_id) {\r\n                                            return <FormControlLabel\r\n                                                key={`${'rights_' + r.value}`}\r\n                                                control={\r\n                                                    <Checkbox\r\n                                                        name=\"rights\"\r\n                                                        key={r.slug}\r\n                                                        id={r.slug}\r\n                                                        checked={isCheckBoxChecked(module.slug, r.slug)}\r\n                                                        onChange={(e) => onChildChange(e, allrights, r.slug, module_slugs)}\r\n                                                        multiple={true}\r\n                                                        value={r.slug}\r\n                                                    />\r\n                                                }\r\n                                                label={r.name}\r\n                                            />\r\n                                        }\r\n                                    })}\r\n\r\n                                </FormGroup>\r\n                            </FormControl>\r\n                        </CardBody>\r\n                    </Card>\r\n                </div>\r\n            )\r\n        })}\r\n    </>\r\n    )\r\n}\r\n\r\nexport default ModuleList"],"mappings":"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"},"metadata":{},"sourceType":"module"}